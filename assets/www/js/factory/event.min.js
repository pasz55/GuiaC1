angular.module("starter").factory("Event",function($pwaRequest){var factory={value_id:null,collection:[],extendedOptions:{}};return factory.setValueId=function(value_id){factory.value_id=value_id},factory.setExtendedOptions=function(options){factory.extendedOptions=options},factory.preFetch=function(){factory.findAll(0)},factory.findAll=function(offset,refresh){return this.value_id||$pwaRequest.reject("[Factory::Event.findAll] missing value_id"),$pwaRequest.get("event/mobile_list/findall",angular.extend({urlParams:{value_id:this.value_id,offset:offset},refresh:refresh,timeout:3e4},factory.extendedOptions))},factory.findById=function(event_id,refresh){return this.value_id||$pwaRequest.reject("[Factory::Event.findById] missing value_id"),$pwaRequest.get("event/mobile_view/find",{urlParams:{value_id:this.value_id,event_id:event_id},refresh:refresh,timeout:3e4})},factory.getEvent=function(event_id){if(!this.value_id)return $pwaRequest.reject("[Factory::Event.getEvent] missing value_id");var event=_.get(_.filter(factory.collection,function(event){return event.id==event_id})[0],"embed_payload",!1);return event?$pwaRequest.resolve(event):factory.findById(event_id)},factory});