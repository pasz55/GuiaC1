angular.module("starter").factory("SetMeal",function($pwaRequest){var factory={value_id:null,set_meal_id:null,displayed_per_page:null,extendedOptions:{},collection:[]};return factory.setValueId=function(value_id){factory.value_id=value_id},factory.setSetMealId=function(set_meal_id){factory.set_meal_id=set_meal_id},factory.setExtendedOptions=function(options){factory.extendedOptions=options},factory.preFetch=function(page){factory.findAll()},factory.findAll=function(offset,refresh){return this.value_id?$pwaRequest.get("catalog/mobile_setmeal_list/findall",angular.extend({urlParams:{value_id:this.value_id,offset:offset},refresh:refresh},factory.extendedOptions)):$pwaRequest.reject("[Factory::SetMeal.findAll] missing value_id")},factory.find=function(set_meal_id){return void 0===set_meal_id&&(set_meal_id=factory.set_meal_id),this.value_id||set_meal_id?$pwaRequest.get("catalog/mobile_setmeal_view/find",{urlParams:{value_id:this.value_id,set_meal_id:set_meal_id}}):$pwaRequest.reject("[Factory::SetMeal.find] missing value_id or set_meal_id")},factory.getSetMeal=function(){if(!this.value_id)return $pwaRequest.reject("[Factory::SetMeal.getSetMeal] missing value_id");var set_meal=_.get(_.filter(factory.collection,function(set_meal){return set_meal.id==factory.set_meal_id})[0],"embed_payload",!1);return set_meal?$pwaRequest.resolve(set_meal):factory.find()},factory});