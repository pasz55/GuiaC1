angular.module("starter").controller("ImageListController",function($scope,$stateParams,$timeout,$translate,Url,Image,ionGalleryConfig){angular.extend($scope,{is_loading:!1,can_load_more:!0,images:[],collection:[],show_galleries:!1,value_id:$stateParams.value_id,card_design:!1}),ionGalleryConfig.action_label=$translate.instant("Done"),Image.setValueId($stateParams.value_id),$scope.loadContent=function(){$scope.is_loading=!0,Image.findAll().then(function(data){$scope.galleries=data.galleries,$scope.galleries.length&&($scope.is_loading=!1,$scope.showGallery($scope.galleries[0])),$scope.page_title=data.page_title}).then(function(){$scope.is_loading=!1})},$scope.showGallery=function(gallery){$scope.show_galleries=!1,$scope.button_label=gallery.name,$scope.current_gallery&&$scope.current_gallery.id===gallery.id||$scope.is_loading||($scope.can_load_more=!0,$scope.collection=[],$scope.current_gallery=gallery,$scope.loadGallery())},$scope.loadGallery=function(){$scope.is_loading=!0;var offset=0;$scope.collection.length&&(offset=$scope.collection[$scope.collection.length-1].offset,"custom"==$scope.current_gallery.type&&offset++),Image.find($scope.current_gallery,offset).then(function(data){for(var i=0;i<data.collection.length;i++)$scope.collection.push(data.collection[i]);$scope.can_load_more=data.collection.length>0&&data.show_load_more}).then(function(){$scope.is_loading=!1,$scope.$broadcast("scroll.infiniteScrollComplete")})},$scope.toggleGalleries=function(){$scope.show_galleries=!$scope.show_galleries},$scope.loadContent()});