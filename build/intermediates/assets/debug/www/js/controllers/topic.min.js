angular.module("starter").controller("TopicController",function($rootScope,$scope,$stateParams,$timeout,Topic){angular.extend($scope,{is_loading:!0,value_id:$stateParams.value_id,no_items:!1}),Topic.setValueId($stateParams.value_id),$scope.loadContent=function(){Topic.findAll().then(function(data){data.collection&&data.collection.length?$scope.items=data.collection:$scope.no_items=!0,data.description?$scope.description=data.description:$scope.description=null,$scope.page_title=data.page_title,$scope.is_loading=!1})},$scope.toggle=function(item){if($rootScope.isNotAvailableOffline())return void $timeout(function(){item.is_subscribed=!item.is_subscribed},200);$scope.is_loading=!0,Topic.subscribe(item.id,item.is_subscribed).then(function(){Topic.findAll(),$scope.is_loading=!1})},$scope.loadContent()});